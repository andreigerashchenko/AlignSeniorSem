<MainScreen>:
    BoxLayout:
        orientation: "vertical"
        padding: 12
        spacing: 10
        canvas.before:
            Color:
                rgba: 132/255,39/255,39/255,1
            Rectangle:
                pos: self.pos
                size: self.size

        BoxLayout: 
            orientation: "horizontal"
            padding: 15
            spacing: 25

            Button:
                pos_hint: {'center_x ': 0.3, 'top': 1}
                background_normal: 'images/help button.png'
                background_down: 'images/help buttonDown.png'
                size_hint: None, None
                size: 50, 50    
                on_press: root.open_Help()


            FitImage:
                id: previewImage
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                #size_hint: 0.751,0.651
                source: "imgassets/r2.jpg"
                id: previewImage
                radius: [2,]
                allow_stretch: False
                keep_ratio: True

            Label:
                text:" "
                size_hint: 0.05,0.5
                pos_hint: {'center_x ': 0.91, 'top': 1}
                

        ScrollView:
            #id: imgQueue
            size_hint: 1, None
            height: 50
            do_scroll_y: False
            BoxLayout:
                id: imgQueue
                size_hint_x: None
                width: self.minimum_width
                orientation: 'horizontal'
                padding: 10, 0
                spacing: 10

                Label:
                    pos_hint: {'x': 1, 'center_y': 0.5}
                    font_size: 45
                    font:'font/sf-ui-display.otf'
                    #text: "Queue"


        BoxLayout:
            orientation: "horizontal"
            size_hint: 1, 0.60
            padding: 15
            spacing: 18

            BoxLayout: 
                #progression_value: 25
                orientation: 'vertical'
                pos_hint: {'x':.5}
                size_hint: 0.75,1
                spacing: 10
                padding: 10

                #spacing between the progress bars needs to be adjusted here!!

                MDProgressBar:
                    #value: root.progression_value
                    id: my_progress_bar
                    min: 0
                    max: 100
                    pos_hint: {'x':.055}
                    color:  2.12, 2.02, 1.63,1
                    size_hint_y:None
                    height:dp(12)  

                MDProgressBar:
                    #value: root.progression_value
                    id: my_progress_bar2
                    min: 0
                    max: 100
                    pos_hint: {'x':.055}
                    color:  2.12, 2.02, 1.63,1
                    size_hint_y:None
                    height:dp(12)  
   

                
                #delete this button when implementing the progress bar function
                Button:
                    pos_hint: {'x':0.25, 'y':0}
                    size_hint: 0.5,0.2
                    id: increment
                    text: "Press Me!"
                    on_press: root.press_it()

            GridLayout:
                cols: 4
                rows: 4
                padding: 10
                spacing: 15

                Label: 
                    text: "Mirror Y: "
                
                Switch:
                    border_radius: 10
                    #size_hint: 0.2,0.425
                    id: mirrorY_switch
                    active: True
                    disabled: False
                    font_size: 32
                Label: 
                    text: "Mirror X: "
                Switch:
                    #size_hint: 0.32,0.425
                    id: mirrorX_switch
                    active: False
                    disabled: False
                    font_size: 32
                Label: 
                    text: "Timelapse: "
                Switch:
                    background_color: 1,0.5,1,0.9
                    #size_hint: 0.32,0.425
                    id: my_switch
                    active: True
                    disabled: False
                    font_size: 32
                Label: 
                    text: "VR Support: "
                Switch:
                    background_color: 1,0.5,0,0.9
                    #size_hint: 0.32,0.45
                    id: my_switch
                    active: True
                    disabled: False
                    font_size: 32

                Label: 
                    text: "Manual Horizon: "
                Switch:
                    background_color: 1,0.5,0,0.9
                    #size_hint: 0.32,0.45
                    id: my_switch
                    active: True
                    disabled: False
                    font_size: 32


            GridLayout:
                cols: 1
                rows: 4
                padding: 10
                spacing: 10
                size_hint: 0.75,1

                Button:
                    background_color: 2.85,2.850,2.850,1
                    color: 0,0,0,1
                    on_press: 
                        #root.ids.previewImage.source = "imgassets/r4.jpg"
                        root.openFileBrowser()
                        self.background_color = (0,0,0,1)
                        self.color = (2.85,2.850,2.850,1)
                    size_hint: 0.1,0.2
                    id: increment
                    text: "Add Files"
                    on_release: 
                        self.background_color= (2.85,2.850,2.850,1)
                        self.color= 0,0,0,1

                Button:
                    color: 0,0,0,1
                    background_color: 2.85,2.850,2.850,1
                    on_press: 
                        self.background_color = (0,0,0,1)
                        self.color = (2.85,2.850,2.850,1)
                    size_hint: 0.05,0.2
                    id: increment
                    text: "Process"
                    on_press:
                    on_release: 
                        self.background_color = (2.85,2.850,2.850,1)
                        self.color= 0,0,0,1
                        root.processImage()


                Button:
                    color: 0,0,0,1
                    background_color: 2.85,2.850,2.850,1
                    on_press: 
                        self.background_color = (0,0,0,1)
                        self.color = (2.85,2.850,2.850,1)
                    size_hint: 0.05,0.2
                    id: increment
                    text: "Download"
                    on_press: 
                    on_release: 
                        self.background_color = (2.85,2.850,2.850,1)
                        self.color= 0,0,0,1

                Button:
                    background_color: 2.85,2.850,2.850,1
                    color: 0,0,0,1
                    on_release: 
                        self.background_color = (2.85,2.850,2.850,1)
                        self.color= 0,0,0,1
                    on_press: 
                        self.background_color = (0,0,0,1)
                        self.color = (2.85,2.850,2.850,1)
                    size_hint: 0.025,0.2
                    id: increment
                    text: "Preferences"
                    on_press: root.open_popup()






<PrefPopup>:
    id: pref
    size_hint: 0.8, 0.8
    auto_dismiss: False
    title: 'Preferences: '
    padding: 40
    space: 40
    background_color: 152/255,49/255,49/255,1
    

    BoxLayout:
        orientation: 'vertical'

        BoxLayout:
            orientation: 'horizontal'
            #size_hint: 1, 0.1
            padding: 19
            spacing: 8
            BoxLayout:
                orientation: 'vertical'

                Switch:
                    #size_hint: 0.2,0.425
                    id: my_switch
                    active: True
                    disabled: False
                    font_size: 32

                Switch:
                    #size_hint: 0.32,0.425
                    id: my_switch
                    active: True
                    disabled: False
                    font_size: 32

            BoxLayout:
                orientation: 'vertical'

                Switch:
                    border_radius: 10
                    #size_hint: 0.2,0.425
                    id: my_switch
                    active: True
                    disabled: False
                    font_size: 32

                Switch:
                    #size_hint: 0.32,0.425
                    id: my_switch
                    active: True
                    disabled: False
                    font_size: 32
        Label:
            text: 'More settings to be added'
        Button:
            text: 'Close'
            size_hint: 0.2, 0.2
            pos_hint: {'center_x': 0.5, 'center_y': 1}
            on_press: root.dismiss()

        Label:
            text: ''



<HelpPopup>:
    id: help
    size_hint: 0.8, 0.8
    auto_dismiss: False
    title: 'Help: '
    padding: 40
    space: 40
    background_color: 152/255,49/255,49/255,1
    BoxLayout:
        orientation: 'vertical'
    
        Label:
            size_hint_y: 0.65
            text_size: self.width, None
            text: 'This is the help section. More information will be added here.'
        Button:
            text: 'Close'
            size_hint: 0.2, 0.2
            pos_hint: {'center_x': 0.5, 'center_y': 1}
            on_press: root.dismiss()

        Label:
            text: ''